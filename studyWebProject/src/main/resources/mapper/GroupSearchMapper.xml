<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.myproject.mapper.guidemenu.GroupSearchMapper">

<!-- 모임 찾기 페이지 이동 시 스터디 모임 전체 리스트 가져오기 -->
<select id="selectStudyListAll" resultType="GroupDTO">
SELECT * FROM studygroup_master
</select>

<!-- 모임명으로 스터디그룹 검색하기 -->
<select id="selectStudyByGroupName" resultType="GroupDTO">
SELECT * FROM studygroup_master WHERE group_name LIKE CONCAT('%' #{groupName}, '%')
</select>

<!-- 모임 대표자의 닉네임 가져오기 -->
<select id="selectGroupMasterNickName" resultType="String">
SELECT member_nickname FROM studygroup_detail
WHERE group_name = #{groupName} AND member_role = '방장'
</select>

<!-- 모임 찾기에서 문의하기 보내기 -->
<insert id="sendQuestion">
INSERT INTO message_master(msg_sender, msg_category, msg_title, msg_content, msg_receiver)
VALUES(#{senderNickName}, "문의하기", #{title}, #{message}, #{groupMasterNickName})
</insert>
</mapper>